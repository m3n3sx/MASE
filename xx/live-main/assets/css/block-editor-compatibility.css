/**
 * Block Editor Compatibility Styles
 * 
 * Ensures WOOW Admin Styler doesn't conflict with Gutenberg/Block Editor
 * 
 * @package ModernAdminStyler
 * @version 2.4.0 - Block Editor Compatibility
 */

/* Ensure our admin bar styles don't interfere with block editor */
.block-editor-page #wpadminbar {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 9999 !important;
}

/* Block editor header compatibility */
.block-editor-editor-skeleton__header {
    top: var(--wp-admin--admin-bar--height, 32px) !important;
}

/* Block editor sidebar compatibility */
.interface-interface-skeleton__sidebar {
    top: calc(var(--wp-admin--admin-bar--height, 32px) + 60px) !important;
}

/* Block editor content area */
.block-editor-editor-skeleton__content {
    margin-top: var(--wp-admin--admin-bar--height, 32px) !important;
}

/* Ensure our micro panels don't interfere with block editor */
.block-editor-page .woow-micro-panel {
    z-index: 99998 !important;
}

/* Block editor toolbar compatibility */
.block-editor-block-toolbar {
    z-index: 99997 !important;
}

/* Block editor inserter compatibility */
.block-editor-inserter__popover {
    z-index: 99996 !important;
}

/* Block editor settings sidebar */
.edit-post-sidebar {
    z-index: 99995 !important;
}

/* Prevent our styles from affecting block previews */
.block-editor-block-preview__container {
    --woow-surface-bar: initial !important;
    --woow-surface-menu: initial !important;
    --woow-surface-bar-text: initial !important;
    --woow-surface-menu-text: initial !important;
}

/* Block editor specific admin menu adjustments */
.block-editor-page #adminmenuwrap {
    z-index: 9998 !important;
}

.block-editor-page #adminmenu {
    position: fixed !important;
}

/* Ensure block editor modals work properly */
.components-modal__screen-overlay {
    z-index: 100000 !important;
}

.components-modal__frame {
    z-index: 100001 !important;
}

/* Block editor popover compatibility */
.components-popover {
    z-index: 99999 !important;
}

/* Block editor dropdown compatibility */
.components-dropdown__content {
    z-index: 99998 !important;
}

/* Ensure our live edit mode doesn't interfere with block editing */
.block-editor-page .woow-live-edit-active {
    pointer-events: none !important;
}

.block-editor-page .woow-live-edit-active .block-editor-block-list__layout {
    pointer-events: all !important;
}

/* Block editor specific color scheme compatibility */
.block-editor-page {
    --woow-block-editor-bg: #fff;
    --woow-block-editor-text: #1e1e1e;
    --woow-block-editor-border: #ddd;
}

/* Dark mode compatibility for block editor */
@media (prefers-color-scheme: dark) {
    .block-editor-page {
        --woow-block-editor-bg: #1e1e1e;
        --woow-block-editor-text: #fff;
        --woow-block-editor-border: #3c434a;
    }
}

/* Block editor responsive compatibility */
@media (max-width: 782px) {
    .block-editor-page #wpadminbar {
        height: 46px !important;
    }
    
    .block-editor-editor-skeleton__header {
        top: 46px !important;
    }
    
    .block-editor-editor-skeleton__content {
        margin-top: 46px !important;
    }
}

/* Ensure block patterns work with our styles */
.block-editor-block-patterns-list__item {
    --woow-surface-bar: initial !important;
    --woow-surface-menu: initial !important;
}

/* Block editor welcome guide compatibility */
.edit-post-welcome-guide {
    z-index: 100002 !important;
}

/* Block editor keyboard shortcuts modal */
.edit-post-keyboard-shortcut-help-modal {
    z-index: 100003 !important;
}

/* Block editor preferences modal */
.edit-post-preferences-modal {
    z-index: 100004 !important;
}

/* Ensure our admin styles don't leak into block previews */
.block-editor-block-preview iframe {
    --woow-surface-bar: initial !important;
    --woow-surface-menu: initial !important;
    --woow-surface-bar-text: initial !important;
    --woow-surface-menu-text: initial !important;
    --woow-surface-bar-hover: initial !important;
    --woow-surface-menu-hover: initial !important;
}

/* Block editor list view compatibility */
.block-editor-list-view {
    z-index: 99994 !important;
}

/* Block editor outline compatibility */
.block-editor-block-outline {
    z-index: 99993 !important;
}

/* Block editor template parts compatibility */
.block-editor-template-part__selection-modal {
    z-index: 100005 !important;
}

/* Site editor compatibility */
.edit-site-header {
    top: var(--wp-admin--admin-bar--height, 32px) !important;
    z-index: 9997 !important;
}

.edit-site-sidebar {
    top: calc(var(--wp-admin--admin-bar--height, 32px) + 60px) !important;
    z-index: 9996 !important;
}

/* Widget editor compatibility */
.edit-widgets-header {
    top: var(--wp-admin--admin-bar--height, 32px) !important;
}

.edit-widgets-sidebar {
    top: calc(var(--wp-admin--admin-bar--height, 32px) + 60px) !important;
}

/* Customizer compatibility when block editor is active */
.wp-customizer .block-editor-page {
    --woow-surface-bar: initial !important;
    --woow-surface-menu: initial !important;
}

/* Ensure our micro panels don't interfere with block selection */
.woow-micro-panel {
    pointer-events: none !important;
}

.woow-micro-panel.woow-micro-panel--active {
    pointer-events: all !important;
}

/* Block editor specific admin notice compatibility */
.block-editor-page .notice {
    z-index: 99992 !important;
}

/* Block editor specific snackbar compatibility */
.components-snackbar-list {
    z-index: 99991 !important;
}

/* Block editor specific tooltip compatibility */
.components-tooltip {
    z-index: 99990 !important;
}

/* Ensure our styles work with full site editing */
.edit-site-visual-editor {
    --woow-surface-bar: initial !important;
    --woow-surface-menu: initial !important;
}

/* Block editor canvas compatibility */
.block-editor-editor-skeleton__body {
    background: var(--woow-block-editor-bg, #fff) !important;
}

/* Block editor specific loading compatibility */
.block-editor-editor-skeleton.is-loading {
    --woow-surface-bar: initial !important;
    --woow-surface-menu: initial !important;
}